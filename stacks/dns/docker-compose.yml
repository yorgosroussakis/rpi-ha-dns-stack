version: '3.8'\n\nservices:\n  pihole_primary:\n    image: pihole/pihole:latest\n    container_name: pihole_primary\n    environment:\n      - TZ=Europe/London\n      - WEBPASSWORD=admin\n    networks:\n      pihole_net:\n        ipv4_address: 192.168.7.241\n    restart: unless-stopped\n    ports:\n      - '53:53/tcp'\n      - '53:53/udp'\n      - '80:80'\n\n  pihole_secondary:\n    image: pihole/pihole:latest\n    container_name: pihole_secondary\n    environment:\n      - TZ=Europe/London\n      - WEBPASSWORD=admin\n    networks:\n      pihole_net:\n        ipv4_address: 192.168.7.242\n    restart: unless-stopped\n    ports:\n      - '53:53/tcp'\n      - '53:53/udp'\n      - '80:80'\n\n  unbound_primary:\n    image: mvance/unbound:latest\n    container_name: unbound_primary\n    networks:\n      pihole_net:\n        ipv4_address: 192.168.7.241\n    restart: unless-stopped\n\n  unbound_secondary:\n    image: mvance/unbound:latest\n    container_name: unbound_secondary\n    networks:\n      pihole_net:\n        ipv4_address: 192.168.7.242\n    restart: unless-stopped\n\n  keepalived:\n    image: osinankur/keepalived:latest\n    container_name: keepalived\n    environment:\n      - VIP=192.168.7.240\n      - PRIMARY=192.168.7.241\n      - SECONDARY=192.168.7.242\n    networks:\n      pihole_net:\n        ipv4_address: 192.168.7.240\n    restart: unless-stopped\n\nnetworks:\n  pihole_net:\n    driver: bridge